# 2024.2.15 Cpp学习记录（四）

## 一、作用域

### （1）函数原型作用域

`double area (double radius);`

`radius`的作用范围就在函数`area`形参列表的左右括号之间。

### （2）局部作用域

函数体内声明的变量，其作用域从声明处开始，一直到声明所在的块结束的花括号为止。

函数形参列表中形参的作用域，从形参列表中的声明处开始，到整个函数体结束之处为止。

### （3）类作用域

### （4）限定作用域的enum枚举类

`enum color {red, yellow, green};`   //不限定作用域的枚举类型 

`enum class color2 {red, yellow, green};`    //限定作用域

`color c = red;`          //全局作用域`color`枚举类

`color2 c2 = color::red;`     //使用了`color2`作用域枚举类元素

## 二、生存期

### （1）静态生存期

`static int i;   //默认i为0`

`static int i=9;  //i被初始化`

## 三、静态成员

### （1）静态数据成员

静态数据成员具有静态生存期。静态数据成员不属于任何一个对象，因此可以通过类名对它进行访问，一般的用法是”类名::标识符“。

在类内初始化后仍可在类外定义静态成员，但是不能做再次初始化操作。

非静态数据成员不能在类外定义。

### （2）静态函数成员

静态函数成员只能通过类名或对象名来调用，而非静态成员函数只能通过对象名来调用。

静态成员函数可以直接访问该类的静态数据和函数成员。而访问非静态成员，必须通过对象名。

## 四、友元

### （1）友元函数

友元关系提供了不同类或对象的成员函数之间、类的成员函数与一般函数之间进行数据共享的机制。

友元函数是在类中用关键字friend修饰的非成员函数。在友元函数的函数体中可以通过对象名访问类的私有和保护成员。

### （2）友元类

若A类为B类的友元类，则A类的所有成员函数都是B类的友元函数，都可以访问B类的私有和保护成员。

```c++
class B
{
	...
	friend class A;
	...
};
```

### 注意：

（1）友元关系不能传递：B类是A类的友元，C类是B类的友元，C类和A类之间，若没有声明，则没有任何友元关系。

（2）友元关系是单向的

（3）友元关系不能被继承：类B是类A的友元，类B的派生类并不会自动成为类A的友元。

## 五、常对象/常成员函数/常引用

### （1）常对象

`const 类型说明符 对象名;`

### （2）常成员函数

`类型说明符 函数名(参数表) const;`

### 注意：

（1）通过常对象只能调用它的常成员函数，而不能调用其他成员函数。

（2）常成员函数调用期间，目的对象都被同为常对象，常成员函数不能更新目的对象的数据成员，也不能针对目的对象调用该类中没有用`const`修饰的成员函数。

### （3）常引用

对于基本数据类型的常引用，不能为数据赋值，对于类类型的引用，不能修改它的数据成员，也不能调用它的非`const`的成员函数。

`const 类型说明符 &引用名;`

## 六、外部变量与外部函数

```c++
//源文件1
int i=3;

//源文件2
extern int i;
```

在文件作用域中，不用`extern`关键字声明的变量，都是定义性声明；用`extern`关键字声明的变量，如果同时指定了初值，则是定义性声明，否则只是引用性声明。

## 总结

[C++ static、const 和 static const 类型成员变量声明以及初始化 | 菜鸟教程 (runoob.com)](https://www.runoob.com/w3cnote/cpp-static-const.html)

